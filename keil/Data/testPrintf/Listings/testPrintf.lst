C51 COMPILER V9.54   TESTPRINTF                                                            02/17/2022 00:34:44 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE TESTPRINTF
OBJECT MODULE PLACED IN .\Objects\testPrintf.obj
COMPILER INVOKED BY: C:\Program Files\Keil_v5\C51\BIN\C51.EXE testPrintf.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND P
                    -RINT(.\Listings\testPrintf.lst) TABS(2) OBJECT(.\Objects\testPrintf.obj)

line level    source

   1          /**
   2           * @file testPrintf.c
   3           * @author kingnan (github.com/kingnan-Guo/PBC)
   4           * @brief  æœ¬é¡¹ç›®ä¸»è¦å­¦ä¹ ä¸€ä¸‹ printf çš„ç”¨æ³• ï¼ŒåŒæ—¶ ä¼šå­¦ä¹ ä¸€ä¸‹  goto çš„ç”¨æ³•ï¼Œ ä»¥å
             -Šä¹‹å‰æ²¡æœ‰å®Œå…¨ææ¸…æ¥šçš„ _at_
   5           * @version 0.1
   6           * @date 2022-02-09
   7           * 
   8           * @copyright Copyright (c) 2022
   9           * 
  10           */
  11          
  12          #include"reg51.h"
  13          #include"intrins.h"
  14          #include "stdio.h"
  15          //#include<stdio.h> 
  16          //#include <stdlib.h> //éšæœºæ•°
  17          
  18          unsigned char i = 20;
  19          
  20          unsigned int C = 20;
  21          // --- star -- æ­¤å¤„å­¦ä¹ ä¸€ä¸‹ _at_0x55  çš„å†™æ³• ï¼›æš‚æ—¶ä¸æ¸…æ¥šå…·ä½“ä»£è¡¨çš„æ„æ€ ----
  22          
  23          
  24          
  25          // unsigned char mem[4] _at_0x55; //ä¹¦ä¸Šè¯´ : å‘é€ç¼“å†²åŒºçš„é¦–åœ°å€(æˆ‘çš„ç†è§£ä¸ºï¼Œå°†mem[4] çš
             -„å­˜å‚¨çš„åœ°å€æŒ‡é’ˆæŒ‡å‘ 0x55)
  26          
  27          // unsigned char men[4] = {0x41, 0x42, 0x43,0x44}; // å‘0x55çš„åœ°å€ å­˜å…¥ å››ä¸ªæ•°æ®ï¼ˆé—®é¢˜æ˜¯å¦‚æ
             -œå­˜ä¸ä¸‹æ€ä¹ˆåŠï¼Ÿï¼Ÿï¼Ÿï¼‰
  28          
  29          // ç°åœ¨è¿™æ ·å†™å°±å¯ä»¥äº†ï¼Œä¿è¯ä»£ç ä¸æŠ¥é”™ï¼Œä½†æ˜¯æ˜¯å¦å­˜å…¥äº†
  30          //unsigned char men[4] _at_ 0x55;
  31          //unsigned char men[4] = {0x41, 0x42, 0x43,0x44};
  32          
  33          
  34          //  -----------  end --------
  35          
  36          
  37          // testGoTo(){
  38          
  39          // }
  40          
  41          
  42          
  43          // è¿™æ®µç”¨äºå­¦ä¹  goto
  44          // unsigned char I2C_SendByte(unsigned char dat, unsigned char ack)
  45          // {
  46           
  47           
  48           
  49          //  unsigned char a = 0,b = 0;//æœ€å¤§255ï¼Œä¸€ä¸ªæœºå™¨å‘¨æœŸä¸º1usï¼Œæœ€å¤§å»¶æ—¶255usã€‚
  50          // Replay:
  51          //     b = 0 ;      
C51 COMPILER V9.54   TESTPRINTF                                                            02/17/2022 00:34:44 PAGE 2   

  52          //  for(a=0; a<8; a++)//è¦å‘é€8ä½ï¼Œä»æœ€é«˜ä½å¼€å§‹
  53          //  {
  54          //    SDA = dat >> 7;  //èµ·å§‹ä¿¡å·ä¹‹åI2C_SCL=0ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ”¹å˜I2C_SDAä¿¡å·
  55          //    dat = dat << 1;
  56          //    Delay10us();
  57          //    SCL = 1;
  58          //    Delay10us();//å»ºç«‹æ—¶é—´>4.7us
  59          //    SCL = 0;
  60          //    Delay10us();//æ—¶é—´å¤§äº4us   
  61          //  }
  62           
  63          //  SDA = 1;
  64          //  Delay10us();
  65          //  SCL = 1;
  66          //  while(SDA && (ack == 1))//ç­‰å¾…åº”ç­”ï¼Œä¹Ÿå°±æ˜¯ç­‰å¾…ä»è®¾å¤‡æŠŠI2C_SDAæ‹‰ä½
  67          //  {
  68          //    b++;
  69          //    if(b > 200)  //å¦‚æœè¶…è¿‡200usæ²¡æœ‰åº”ç­”å‘é€å¤±è´¥ï¼Œæˆ–è€…ä¸ºéåº”ç­”ï¼Œè¡¨ç¤ºæ¥æ”¶ç»“æŸ
  70          //    {
  71          //      SCL = 0;
  72          //      Delay10us();
  73          //    //  return 0;
  74          //      goto Replay ;   //å¦‚æœè¶…è¿‡200usæ²¡æœ‰åº”ç­”åˆ™å‘é€å¤±è´¥ï¼Œæˆ–è€…ä¸ºéåº”ç­”ï¼Œè¿™æ—¶å€™ç³»ç»
             -Ÿå¯åŠ¨é‡å‘æœºåˆ¶
  75          //              //ä½¿ç”¨gotoè¯­å¥è¿”å›åˆ°ä¸Šé¢æ¥ç€å‘
  76          //    }
  77          //  }
  78           
  79          //  SCL = 0;
  80          //  Delay10us();
  81          //    return 1;   
  82          // }
  83          // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
  84          // ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œå‹¿èˆ›ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½
             -è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚
  85          // åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/zbl12345678910/article/details/106029054
  86          
  87          
  88          // å»¶æ—¶å‡½æ•°
  89          void delay(num) {
  90   1          int i = 0;
  91   1          for (i = 0; i < num; i++)
  92   1          {
  93   2              _nop_(); // _nop_(); ä»£è¡¨è¿è¡Œä¸€ä¸ªæœºå™¨å‘¨æœŸ. å¦‚æœè¿™ä¸ªå•ç‰‡æœºçš„æ™¶æŒ¯æ˜¯12Mçš„ï¼Œé‚£
             -ä¹ˆè¿™è°ƒä»£ç ä¼šè¿è¡Œ1US
  94   2          }
  95   1      }
  96          
  97          // ä¸²å£åˆå§‹åŒ–
  98          void urtInit(){
  99   1          TMOD |= 0x20;  // 0010 0000 ä½¿ç”¨å®šæ—¶å™¨1 
 100   1          TH1 = 0xFD; // è®¾ç½® æ³¢ç‰¹ç‡ 9600 // æ—¶é’Ÿé¢‘ç‡11.0592M
 101   1          TL1 = 0xFD;
 102   1          SCON = 0x50; // 0101 0000  è®¾ç½®æ–¹å¼1  8ä½å¼‚æ­¥é€šä¿¡æ–¹å¼  ä¸²å£å¯„å­˜å™¨ æ³¢ç‰¹ç‡å¯å˜ 
 103   1          PCON = 0; //SMOD=1 æ³¢ç‰¹ç‡åŠ å€ è¿™é‡Œä¸åŠ å€
 104   1      
 105   1          ES = 1; // ä¸²å£ä¸­æ–­
 106   1          EA = 1; // å¼€å¯æ€»ä¸­æ–­
 107   1          TR1 = 1; //å¼€å¯å®šæ—¶å™¨1
 108   1      
 109   1      
 110   1      }
C51 COMPILER V9.54   TESTPRINTF                                                            02/17/2022 00:34:44 PAGE 3   

 111          
 112          
 113          // å•ç‰‡æœº çš„ä¸»å‡½æ•°ä¸èƒ½ä¼ é€’å‚æ•°
 114          int main()
 115          {
 116   1          urtInit();
 117   1          TI = 1; // å¦‚æœæƒ³ä½¿ç”¨ printF å‡½æ•° å¿…é¡»TI = 1
 118   1        // while(!TI); //  å¾ªç¯æ£€æµ‹æ˜¯å¦å‘é€å®Œæˆ å¦‚æœå‘é€å®Œæˆ TI ä¼šè¢«ç½®ä¸º1ï¼Œ éœ€è¦å†æ¬¡å‘é
             -€ éœ€è¦æ‰‹åŠ¨ç½®ä¸º 0ï¼›
 119   1        // å‘é€å®Œæˆä¹‹å è®¾ç½® TI = 0 è¿™æ ·ç¬¬äºŒæ¬¡å°±å¯ä»¥å‘é€
 120   1          
 121   1          while (C)
 122   1          {
 123   2              printf ("Hello World\n");
 124   2              printf ("%d \n", C); //Cæ˜¯ int æ‰€ä»¥æ‰“å°å‡ºæ¥çš„ä¼šæ˜¯æ•°å­—
 125   2              printf ("%d \n", i); // ä¸¤ç§æ•°æ® char ç±»å‹çš„æ‰“å°å‡ºçš„ä¼šæ˜¯ äºŒè¿›åˆ¶
 126   2              
 127   2              delay(50000000000);
 128   2              C--;
 129   2          }
 130   1        return 0;
 131   1      }
 132          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    115    ----
   CONSTANT SIZE    =     18    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
