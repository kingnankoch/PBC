C51 COMPILER V9.54   LCD                                                                   11/30/2021 23:51:35 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE LCD
OBJECT MODULE PLACED IN .\Objects\lcd.obj
COMPILER INVOKED BY: C:\Program Files\Keil_v5\C51\BIN\C51.EXE lcd.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\
                    -Listings\lcd.lst) TABS(2) OBJECT(.\Objects\lcd.obj)

line level    source

   1          #include "reg51.h"
   2          
   3          sbit RS = P3^0;
   4          sbit RW = P3^1;
   5          sbit E = P3^2;
   6          unsigned char str[] = {"hello world"};
   7          unsigned int j = 0;
   8          
   9          // å»¶æ—¶å‡½æ•°
  10          void delay (unsigned int n)
  11          {
  12   1        unsigned int i=0,j=0;
  13   1        for (i = 0; i < n; i++)
  14   1        {
  15   2          for(j=0;j<120;j++);
  16   2        }
  17   1      }
  18          
  19          // å†™å‘½ä»¤
  20          void wireCommand(unsigned char com) {
  21   1          RS = 0; // ä½Žç”µå¹³å¼€å§‹å†™å‘½ä»¤   é«˜ç”µå¹³å†™æ•°æ®
  22   1          RW = 0; // ä½Žç”µå¹³ä¸º å†™ï¼Œ é«˜ç”µå¹³ä¸ºè¯» 
  23   1          E = 0;  // ä½¿èƒ½ ç«¯ ä¸‹é™æ²¿æœ‰æ•ˆï¼›  æ ¹æ®æ—¶åºå›¾  åˆå§‹ä½Žç”µå¹³ï¼Œç„¶åŽæ‹‰é«˜ç”µå¹³ å‰ æ”
             -¾å…¥ æ•°æ®
  24   1          P2 = com; // é€šè¿‡ P2å­˜å…¥æ•°æ®
  25   1          delay(5);
  26   1          E = 1; // æ‹‰é«˜ç”µå¹³ å¼€å§‹å†™å…¥æ•°æ®ï¼Œ ç„¶åŽ  æ•°æ®ä¼ è¾“å®Œæˆ æ‹‰ä½Ž
  27   1          E = 0; // æ‹‰ä½Žç”µå¹³ æ•°æ®å†™å…¥å®Œæˆï¼Œ
  28   1      }
  29          
  30          // å†™æ•°æ®
  31          void wireData(unsigned char dat){
  32   1          RS = 1; // ä½Žç”µå¹³å¼€å§‹å†™å‘½ä»¤   é«˜ç”µå¹³å†™æ•°æ®
  33   1          RW = 0; // ä½Žç”µå¹³ä¸º å†™ï¼Œ é«˜ç”µå¹³ä¸ºè¯» 
  34   1          E = 0;  // ä½¿èƒ½ ç«¯ ä¸‹é™æ²¿æœ‰æ•ˆï¼›  æ ¹æ®æ—¶åºå›¾  åˆå§‹ä½Žç”µå¹³ï¼Œç„¶åŽæ‹‰é«˜ç”µå¹³ å‰ æ”
             -¾å…¥ æ•°æ®
  35   1          P2 = dat;// é€šè¿‡ P2å­˜å…¥æ•°æ®
  36   1          delay(5);
  37   1          E = 1; // æ‹‰é«˜ç”µå¹³ å¼€å§‹å†™å…¥æ•°æ®ï¼Œ ç„¶åŽ  æ•°æ®ä¼ è¾“å®Œæˆ æ‹‰ä½Ž
  38   1          E = 0; // æ‹‰ä½Žç”µå¹³ æ•°æ®å†™å…¥å®Œæˆï¼Œ
  39   1      }
  40          
  41          void initLcd(){
  42   1          // å†™å…¥å‘½ä»¤ 
  43   1          // 00111000  è®¾ç½®16 * 2æ˜¾ç¤ºï¼Œ 5*7ç‚¹é˜µï¼Œ 8ä½æ•°æ®æŽ¥å£
  44   1          wireCommand(0x38);
  45   1          // 0x0C  00001100 è®¾ç½®å¼€æ˜¾ç¤ºï¼Œ ä¸æ˜¾ç¤ºå…‰æ ‡
  46   1          wireCommand(0x0C);
  47   1          // å†™ä¸€ä¸ªå­—ç¬¦åŽåœ°å€æŒ‡é’ˆ åŠ ä¸€
  48   1          wireCommand(0x06);
  49   1          // æ˜¾ç¤ºæ¸…é›¶ æ•°æ®æŒ‡é’ˆæ¸…é›¶
  50   1          wireCommand(0x01);
  51   1      
  52   1      }
C51 COMPILER V9.54   LCD                                                                   11/30/2021 23:51:35 PAGE 2   

  53          
  54          
  55          void display(){
  56   1          wireCommand(0x80);
  57   1          delay(5);
  58   1          wireData('K');
  59   1          delay(5);
  60   1          wireData('i');
  61   1          delay(5);
  62   1          // é€šè¿‡ ask ç  æ˜¾ç¤ºæ•°æ®
  63   1          wireData(0x31);
  64   1          delay(5);
  65   1          // wireData(0111000); é”™è¯¯çš„æ–¹å¼
  66   1          // wireCommand(0x80 + 2);
  67   1          wireCommand(0x80 + 2 + 0x40);
  68   1          // "\0" è¡¨ç¤ºç»“æŸç¬¦
  69   1          while (str[j]!='\0')
  70   1          {
  71   2              /* code */
  72   2              wireData(str[j]);
  73   2              delay(5);
  74   2              j++; 
  75   2          }
  76   1          
  77   1      }
  78          
  79          int main()
  80          {
  81   1          // åˆå§‹åŒ–LCD
  82   1          initLcd();
  83   1          /* code */
  84   1          while (1)
  85   1          {
  86   2              /* æ˜¾ç¤ºæ•°å€¼ */
  87   2              display();
  88   2          }
  89   1          
  90   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    150    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     14    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
